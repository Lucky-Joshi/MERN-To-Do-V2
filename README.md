# ğŸ“˜ MERN To-Do App â€“ README & Architecture Guide

---

## ğŸŒŸ Overview

This is a full-featured, beautifully designed **To-Do App** built using the **MERN stack**:

* **MongoDB** (Compass)
* **Express.js** (Backend API)
* **React** (Frontend via Vite)
* **Node.js** (Runtime)
* **Custom CSS** (UI Styling)
* **Axios** (Frontend â†’ Backend communication)
* **Mongoose** (MongoDB ORM)

Anonymous users can manage tasks locally using a persistent `userId` stored in `localStorage`.

---

## ğŸš€ Project Setup Instructions

### ğŸ–¥ï¸ Backend Setup

1. Go to `backend/` folder:

```sh
cd backend
```

2. Install dependencies:

```sh
npm install
```

3. Create a `.env` file:

```sh
PORT=5000
MONGO_URI=your_mongodb_connection_string
```

4. Start the server:

```sh
npm run dev
```

5. You should see:

```
Server running on http://localhost:5000
MongoDB Connected âœ…
```

### ğŸ§‘â€ğŸ¨ Frontend Setup

1. Go to `todo-frontend/` folder:

```sh
cd todo-frontend
```

2. Install dependencies:

```sh
npm install
```

3. Start the React dev server:

```sh
npm run dev
```

4. App will be live at:

```
http://localhost:5173
```

---

## ğŸ§± Folder Structure

### ğŸ“‚ Project Root:

```
project-root/
â”œâ”€â”€ backend/
â”œâ”€â”€ todo-frontend/
```

### ğŸ“ Backend:

```
backend/
â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ taskController.js
â”œâ”€â”€ models/
â”‚   â””â”€â”€ Task.js
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ taskRoutes.js
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ priorityMap.js (optional)
â”œâ”€â”€ server.js
â”œâ”€â”€ .env
```

### ğŸ“ Frontend (Vite):

```
todo-frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ assets/styles.css
â”‚   â”œâ”€â”€ App.jsx
â”‚   â””â”€â”€ main.jsx
â”œâ”€â”€ index.css
```

---

## ğŸ§  Execution Flow Diagram (High-Level)

```
[ React Frontend ]
       â†“ Axios
[ Express Server (Node.js) ]
       â†“
[ taskController.js (Business Logic) ]
       â†“
[ Mongoose Model (Task.js) ]
       â†“
[ MongoDB Compass ]
       â†“
[ Response â†’ Frontend ]
```

---

## ğŸ” ID Management

* **Anonymous `userId`**: Created using `uuidv4()` on first visit, saved in `localStorage`
* **`taskId`**: Auto-generated by MongoDB (`_id`)

---

## ğŸ“¬ API Endpoints

| Method | Endpoint                              | Description                   |
| ------ | ------------------------------------- | ----------------------------- |
| POST   | `/api/tasks`                          | Create new task               |
| GET    | `/api/tasks/:userId?filter=all`       | Get all active tasks          |
| GET    | `/api/tasks/:userId?filter=completed` | Get completed tasks           |
| GET    | `/api/tasks/:userId?filter=trashed`   | Get trashed tasks             |
| PUT    | `/api/tasks/toggle/:id`               | Toggle done/undone            |
| PUT    | `/api/tasks/trash/:id`                | Soft delete task (trash)      |
| PUT    | `/api/tasks/restore/:id`              | Restore from trash            |
| DELETE | `/api/tasks/:id`                      | Permanently delete from trash |

---

## ğŸ§© Backend Components Explained

### ğŸ› ï¸ server.js

Sets up Express server, connects to MongoDB, and uses routes.

### ğŸ“„ taskRoutes.js

Maps HTTP methods and endpoints to controller functions.

### âš™ï¸ taskController.js

Contains business logic for task creation, updating, filtering, sorting, and deletion.

#### âœ… Updated Sorting Logic:

* In `getTasks`, tasks are sorted like this:

  1. Incomplete tasks appear first
  2. Sorted by priority: **High â†’ Medium â†’ Low â†’ Lowest**
  3. Completed tasks are pushed to the end

```js
const priorityOrder = { High: 1, Medium: 2, Low: 3, Lowest: 4 };

exports.getTasks = async (req, res) => {
  try {
    const { userId } = req.params;
    const { filter } = req.query;

    let query = { userId };

    if (filter === "completed") query.completed = true;
    else if (filter === "trashed") query.trashed = true;
    else query.trashed = false;

    let tasks = await Task.find(query);

    tasks.sort((a, b) => {
      if (a.completed !== b.completed) return a.completed ? 1 : -1;
      return priorityOrder[a.priority] - priorityOrder[b.priority];
    });

    res.status(200).json(tasks);
  } catch (err) {
    res.status(400).json({ error: err.message });
  }
};
```

---

## ğŸ”„ Task Sorting (Visual)

```
[ Sorted List â†’ Returned to Frontend ]
â”œâ”€â”€ Task A (Incomplete, High)
â”œâ”€â”€ Task B (Incomplete, Medium)
â”œâ”€â”€ Task C (Incomplete, Low)
â”œâ”€â”€ Task D (Completed, High)
â”œâ”€â”€ Task E (Completed, Medium)
```

---

## ğŸ¨ Frontend UX

* Full page layout
* Top Left: ğŸ‘¤ userId (first 8 chars)
* Center: ğŸ“ App Name
* Top Right: â• Add Task button

### Task Modal Includes:

* Title (required)
* Priority (dropdown)
* Description (optional)
* Submit button triggers popup confirmation

### Task Card Shows:

* Title, description
* Priority pill
* Action buttons: Done/Undone, Trash, Restore, Delete

---

## ğŸ”„ Flow of a Task Creation

```
[User opens modal and submits task]
      â†“
[POST /api/tasks] â† React uses Axios
      â†“
[Express route handler calls controller]
      â†“
[taskController.createTask() saves to MongoDB]
      â†“
[Returns saved task to frontend]
      â†“
[React updates task list with new item]
```

---

## ğŸ§  Filtering Logic

```js
GET /api/tasks/:userId?filter=completed
```

---

## ğŸ–¼ï¸ Architecture Diagram (Textual)

```
+------------+        +-------------+        +-------------+        +-----------+
| React App  | <----> | Express API | <----> | Mongoose ORM | <----> | MongoDB   |
+------------+        +-------------+        +-------------+        +-----------+
```

---

## ğŸ§­ Flowchart â€“ Full Interaction Example

```
+---------------------+
| User fills Task Form|
+---------------------+
          |
          v
+----------------------+
| Frontend sends POST  |
| via Axios to Express |
+----------------------+
          |
          v
+-----------------------------+
| Express receives the POST   |
| route /api/tasks            |
+-----------------------------+
          |
          v
+-----------------------------+
| taskController.createTask() |
+-----------------------------+
          |
          v
+--------------------------+
| Mongoose saves to MongoDB |
+--------------------------+
          |
          v
+----------------------+
| Send response back   |
+----------------------+
          |
          v
+----------------------+
| React updates UI     |
+----------------------+
```

---
